<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <link rel="stylesheet" href="/libs/highlight/styles/github.min.css">
   
  <link rel="stylesheet" href="/css/franklin.css">
<link rel="stylesheet" href="/css/poole_hyde.css">
<link rel="stylesheet" href="/css/custom.css">
<link rel="stylesheet" href="/libs/highlight/styles/github-dark.min.css">

<style>
  html {font-size: 17px;}
  .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;}
  @media (min-width: 940px) {
    .franklin-content {width: 100%; margin-left: auto; margin-right: auto;}
  }
  @media (max-width: 768px) {
    .franklin-content {padding-left: 6%; padding-right: 6%;}
  }
</style>
<link rel="icon" href="/assets/favicon.png">

   <title>Sharing your code</title>  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1><a href="/">MoJuWo</a></h1>
      <p class="lead">Modern Julia Workflows</p>
      <div class="logo-container">
        <img src="/assets/logo.svg" alt="MoJuWo Logo" class="logo-img">
      </div>
    </div>
    <nav class="sidebar-nav">
      
      <a class="sidebar-nav-item " href="/">Home</a>			  
      <ul class="menu-list-child-list ">
        <li class="menu-list-item"><a href="/#goals" class="menu-list-link">Goals</a>
        <li class="menu-list-item"><a href="/#contents" class="menu-list-link">Contents</a>
        <li class="menu-list-item"><a href="/#before_you_start" class="menu-list-link">Before you start</a>
      </ul>
      
      <a class="sidebar-nav-item " href="/writing/">Writing</a>
        <ul class="menu-list-child-list ">
          <li class="menu-list-item"><a href="/writing/#getting_help" class="menu-list-link">Getting help</a>
          <li class="menu-list-item"><a href="/writing/#installation" class="menu-list-link">Installation</a>
          <li class="menu-list-item"><a href="/writing/#repl" class="menu-list-link">REPL</a>
          <li class="menu-list-item"><a href="/writing/#editor" class="menu-list-link">Editor</a>
          <li class="menu-list-item"><a href="/writing/#running_code" class="menu-list-link">Running code</a>
          <li class="menu-list-item"><a href="/writing/#notebooks" class="menu-list-link">Notebooks</a>
          <li class="menu-list-item"><a href="/writing/#environments" class="menu-list-link">Environments</a>
          <li class="menu-list-item"><a href="/writing/#local_packages" class="menu-list-link">Local packages</a>
          <li class="menu-list-item"><a href="/writing/#development_workflow" class="menu-list-link">Development workflow</a>
          <li class="menu-list-item"><a href="/writing/#configuration" class="menu-list-link">Configuration</a>
          <li class="menu-list-item"><a href="/writing/#interactivity" class="menu-list-link">Interactivity</a>
          <li class="menu-list-item"><a href="/writing/#logging" class="menu-list-link">Logging</a>
          <li class="menu-list-item"><a href="/writing/#debugging" class="menu-list-link">Debugging</a>
        </ul>
      
      <a class="sidebar-nav-item active" href="/sharing/">Sharing</a>
      <ul class="menu-list-child-list active">
        <li class="menu-list-item"><a href="/sharing/#setup" class="menu-list-link">Setup</a>
        <li class="menu-list-item"><a href="/sharing/#github_actions" class="menu-list-link">GitHub Actions</a>
        <li class="menu-list-item"><a href="/sharing/#testing" class="menu-list-link">Testing</a>
        <li class="menu-list-item"><a href="/sharing/#style" class="menu-list-link">Style</a>
        <li class="menu-list-item"><a href="/sharing/#code_quality" class="menu-list-link">Code quality</a>
        <li class="menu-list-item"><a href="/sharing/#documentation" class="menu-list-link">Documentation</a>
        <li class="menu-list-item"><a href="/sharing/#literate_programming" class="menu-list-link">Literate programming</a>
        <li class="menu-list-item"><a href="/sharing/#versions_and_registration" class="menu-list-link">Versions and registration</a>
        <li class="menu-list-item"><a href="/sharing/#reproducibility" class="menu-list-link">Reproducibility</a>
        <li class="menu-list-item"><a href="/sharing/#interoperability" class="menu-list-link">Interoperability</a>
        <li class="menu-list-item"><a href="/sharing/#collaboration" class="menu-list-link">Collaboration</a>
      </ul>
      
      <a class="sidebar-nav-item " href="/optimizing/">Optimizing</a>
      <ul class="menu-list-child-list ">
        <li class="menu-list-item"><a href="/optimizing/#principles" class="menu-list-link">Principles</a>
        <li class="menu-list-item"><a href="/optimizing/#measurements" class="menu-list-link">Measurements</a>
        <li class="menu-list-item"><a href="/optimizing/#profiling" class="menu-list-link">Profiling</a>
        <li class="menu-list-item"><a href="/optimizing/#type_stability" class="menu-list-link">Type stability</a>
        <li class="menu-list-item"><a href="/optimizing/#memory_management" class="menu-list-link">Memory management</a>
        <li class="menu-list-item"><a href="/optimizing/#compilation" class="menu-list-link">Compilation</a>
        <li class="menu-list-item"><a href="/optimizing/#parallelism" class="menu-list-link">Parallelism</a>
        <li class="menu-list-item"><a href="/optimizing/#efficient_types" class="menu-list-link">Efficient types</a>
      </ul>
      
      <a class="sidebar-nav-item " href="/further/">Going further</a>
      <ul class="menu-list-child-list ">
        <li class="menu-list-item"><a href="/further/#official" class="menu-list-link">Official</a>
        <li class="menu-list-item"><a href="/further/#tutorials" class="menu-list-link">Tutorials</a>
        <li class="menu-list-item"><a href="/further/#blogs" class="menu-list-link">Blogs</a>
        <li class="menu-list-item"><a href="/further/#videos" class="menu-list-link">Videos</a>
        <li class="menu-list-item"><a href="/further/#lore" class="menu-list-link">Lore</a>
      </ul>
    </nav>
    <p class="copyright-notice">
      <a href="https://github.com/modernjuliaworkflows/modernjuliaworkflows.github.io/blob/main/LICENSE">
        &copy; G. Dalle, J. Smit, A. Hill.
      </a>
    </p>
    <div class="github-link">
      <a href="https://github.com/modernjuliaworkflows/modernjuliaworkflows.github.io">
        <svg xmlns="http://www.w3.org/2000/svg" height="28px" fill="currentColor" viewBox="0 0 496 512">
          
          <path
            d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
        </svg>
      </a>
    </div>
  </div>
</div>
<div class="content container">

<div class="franklin-content" >
  <h1 id="sharing_your_code" ><a href="#sharing_your_code"> Sharing your code</a></h1><p>In this post, you will learn about tools to initialize, structure and distribute Julia packages.</p>
<div class="toc"><ol><li><a href="#setup">Setup</a></li><li><a href="#github_actions">GitHub Actions</a></li><li><a href="#testing">Testing</a></li><li><a href="#style">Style</a></li><li><a href="#code_quality">Code quality</a></li><li><a href="#documentation">Documentation</a></li><li><a href="#literate_programming">Literate programming</a></li><li><a href="#versions_and_registration">Versions and registration</a></li><li><a href="#reproducibility">Reproducibility</a></li><li><a href="#interoperability">Interoperability</a></li><li><a href="#collaboration">Collaboration</a></li></ol></div><h2 id="setup" ><a href="#setup"> Setup</a></h2><p>A vast majority of Julia packages are hosted on <a href="https://github.com/">GitHub</a> (although less common, other options like <a href="https://gitlab.com/">GitLab</a> are also possible).
GitHub is a platform for collaborative software development, based on the version control system <a href="https://git-scm.com/">Git</a>.
If you are unfamiliar with these technologies, check out the <a href="https://docs.github.com/en/get-started/quickstart">GitHub documentation</a>.</p>
<p>The first step is therefore <a href="https://github.com/new">creating</a> an empty GitHub repository.
You should try to follow <a href="https://pkgdocs.julialang.org/v1/creating-packages/#Package-naming-guidelines">package naming guidelines</a> and add a ".jl" extension at the end, like so: "MyAwesomePackage.jl".
Do not insert any files like <code>README.md</code>, <code>.gitignore</code> or <code>LICENSE.md</code>, this will be done for you in the next step.</p>
<p>Indeed, we can leverage <a href="https://github.com/JuliaCI/PkgTemplates.jl">PkgTemplates.jl</a> to automate package creation (like <code>]generate</code> from Pkg.jl but on steroids).
The following code gives you a basic file structure to start with:</p>
<pre><code class="julia-repl"><span class="sgr32"><span class="sgr1">julia&gt;</span></span> using PkgTemplates

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> dir = Utils.path(:site)  # replace with the folder of your choice
/home/runner/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> t = Template(dir=dir, user=&quot;myuser&quot;, interactive=false);

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> t(&quot;MyAwesomePackage&quot;)
<span class="sgr36"><span class="sgr1">[ Info: </span></span>Running prehooks
<span class="sgr36"><span class="sgr1">[ Info: </span></span>Running hooks
<span class="sgr32"><span class="sgr1">  Activating</span></span> project at `~/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage`
<span class="sgr32"><span class="sgr1">    Updating</span></span> registry at `~/.julia/registries/General.toml`
<span class="sgr32"><span class="sgr1">  No Changes</span></span> to `~/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage/Project.toml`
<span class="sgr32"><span class="sgr1">  No Changes</span></span> to `~/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage/Manifest.toml`
<span class="sgr32"><span class="sgr1">Precompiling</span></span> project...
<span class="sgr32">  ✓ </span>MyAwesomePackage
  1 dependency successfully precompiled in 0 seconds
<span class="sgr36"><span class="sgr1">        Info</span></span> We haven&#39;t cleaned this depot up for a bit, running Pkg.gc()...
<span class="sgr32"><span class="sgr1">      Active</span></span> manifest files: 4 found
<span class="sgr32"><span class="sgr1">      Active</span></span> artifact files: 2 found
<span class="sgr32"><span class="sgr1">      Active</span></span> scratchspaces: 0 found
<span class="sgr32"><span class="sgr1">     Deleted</span></span> no artifacts, repos, packages or scratchspaces
<span class="sgr32"><span class="sgr1">  Activating</span></span> project at `~/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/sharing`
<span class="sgr36"><span class="sgr1">[ Info: </span></span>Running posthooks
<span class="sgr36"><span class="sgr1">[ Info: </span></span>New package is at /home/runner/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage
/home/runner/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage
</code></pre>
<p>Then, you simply need to push this new folder to the remote repository <a href="https://github.com/myuser/MyAwesomePackage.jl">https://github.com/myuser/MyAwesomePackage.jl</a>, and you're ready to go.
The rest of this post will explain to you what each part of this folder does, and how to bend them to your will.</p>
<p>To work on the package further, we develop it into the current environment and import it:</p>
<pre><code class="julia-repl"><span class="sgr32"><span class="sgr1">julia&gt;</span></span> using Pkg

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> Pkg.develop(path=sitepath(&quot;MyAwesomePackage&quot;))  # ignore sitepath
<span class="sgr32"><span class="sgr1">   Resolving</span></span> package versions...
<span class="sgr32"><span class="sgr1">    Updating</span></span> `~/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/sharing/Project.toml`
  <span class="sgr90">[0e87e675] </span><span class="sgr92">+ MyAwesomePackage v1.0.0-DEV `~/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage`</span>
<span class="sgr32"><span class="sgr1">    Updating</span></span> `~/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/sharing/Manifest.toml`
  <span class="sgr90">[0e87e675] </span><span class="sgr92">+ MyAwesomePackage v1.0.0-DEV `~/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage`</span>

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> using MyAwesomePackage
</code></pre>
<h2 id="github_actions" ><a href="#github_actions"> GitHub Actions</a></h2><p>The most useful aspect of PkgTemplates.jl is that it automatically generates workflows for <a href="https://docs.github.com/en/actions/quickstart">GitHub Actions</a>.
These are stored as YAML files in <code>.github/workflows</code>, with a slightly convoluted syntax that you don't need to fully understand.
For instance, the file <code>CI.yml</code> contains instructions that execute the tests of your package (see below) for each pull request, tag or push to the <code>main</code> branch.
This is done on a GitHub server and should theoretically cost you money, but your GitHub repository is public, you get an unlimited workflow budget for free.</p>
<p>A variety of workflows and functionalities are available through optional <a href="https://juliaci.github.io/PkgTemplates.jl/stable/user/#Plugins-1">plugins</a>.
The interactive setting <code>Template(..., interactive=true)</code> allows you to select the ones you want for a given package.
Otherwise, you will get the <a href="https://juliaci.github.io/PkgTemplates.jl/stable/user/#Default-Plugins">default selection</a>, which you are encouraged to look at.</p>
<h2 id="testing" ><a href="#testing"> Testing</a></h2><p>The purpose of the <code>test</code> subfolder in your package is <a href="https://docs.julialang.org/en/v1/stdlib/Test/">unit testing</a>: automatically checking that your code behaves the way you want it to.
For instance, if you write your own square root function, you may want to test that it gives the correct results for positive numbers, and errors for negative numbers.</p>
<pre><code class="julia-repl"><span class="sgr32"><span class="sgr1">julia&gt;</span></span> using Test

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> @test sqrt(4) ≈ 2
Test Passed

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> @testset &quot;Invalid inputs&quot; begin
    @test_throws DomainError sqrt(-1)
    @test_throws MethodError sqrt(&quot;abc&quot;)
end;
<span class="sgr1">Test Summary:  | <span class="sgr32">Pass  </span><span class="sgr36">Total  </span>Time</span>
Invalid inputs | <span class="sgr32">   2  </span><span class="sgr36">    2  </span>0.0s
</code></pre>
<p>Such tests belong in <code>test/runtests.jl</code>, and they are executed with the <code>]test</code> command (in the REPL's Pkg mode).
Unit testing may seem rather naive, or even superfluous, but as your code grows more complex, it becomes easier to break something without noticing.
Testing each part separately will increase the reliability of the software you write.</p>
<div class="advanced"><p><strong>Advanced</strong>: To test the arguments provided to the functions within your code (for instance their sign or value), avoid <code>@assert</code> (which can be deactivated) and use <a href="https://github.com/jw3126/ArgCheck.jl">ArgCheck.jl</a> instead.</p>
</div><p>At some point, your package may require <a href="https://pkgdocs.julialang.org/v1/creating-packages/#Adding-tests-to-the-package">test-specific dependencies</a>.
This often happens when you need to test compatibility with another package, on which you do not depend for the source code itself.
Or it may simply be due to testing-specific packages like the ones we will encounter below.
For interactive testing work, use <a href="https://github.com/JuliaTesting/TestEnv.jl">TestEnv.jl</a> to activate the full test environment (faster than running <code>]test</code> repeatedly).</p>
<div class="vscode"><p><strong>VSCode</strong>: The Julia extension also has its own testing framework, which relies on sprinkling "test items" throughout the code.
 See <a href="https://github.com/julia-vscode/TestItemRunner.jl">TestItemRunner.jl</a> for indications on how to use them optimally.</p>
</div><div class="advanced"><p><strong>Advanced</strong>: If you want to have more control over your tests, you can try</p>
<ul>
<li><a href="https://github.com/JuliaTesting/ReferenceTests.jl">ReferenceTests.jl</a> to compare function outputs with reference files.</li>
<li><a href="https://github.com/JuliaTesting/ReTest.jl">ReTest.jl</a> to define tests next to the source code and control their execution.</li>
<li><a href="https://github.com/ssfrr/TestSetExtensions.jl">TestSetExtensions.jl</a> to make test set outputs more readable.</li>
<li><a href="https://github.com/thchr/TestReadme.jl">TestReadme.jl</a> to test whatever code samples are in your README.</li>
<li><a href="https://github.com/JuliaTesting/ReTestItems.jl">ReTestItems.jl</a> for an alternative take on VSCode's test item framework.</li>
</ul>
</div><p>Code coverage refers to the fraction of lines in your source code that are covered by tests.
It is a good indicator of the exhaustiveness of your test suite, albeit not sufficient.
<a href="https://about.codecov.io/">Codecov</a> is a website that provides easy visualization of this coverage, and many Julia packages use it.
It is available as a PkgTemplates.jl plugin, but you have to perform an <a href="https://docs.codecov.com/docs/adding-the-codecov-token">additional configuration step</a> on the repo for Codecov to communicate with it.</p>
<h2 id="style" ><a href="#style"> Style</a></h2><p>To make your code easy to read, it is essential to follow a consistent set of guidelines.
The official <a href="https://docs.julialang.org/en/v1/manual/style-guide/">style guide</a> is very short, so most people use third party style guides like <a href="https://github.com/JuliaDiff/BlueStyle">BlueStyle</a> or <a href="https://github.com/SciML/SciMLStyle">SciMLStyle</a>.</p>
<p><a href="https://github.com/domluna/JuliaFormatter.jl">JuliaFormatter.jl</a> is an automated formatter for Julia files which can help you enforce the style guide of your choice.
Just add a file <code>.JuliaFormatter.toml</code> at the root of your repository, containing a single line like</p>
<pre><code class="toml">style = &quot;blue&quot;</code></pre>
<p>Then, the package directory will be formatted in the BlueStyle whenever you call</p>
<pre><code class="julia-repl"><span class="sgr32"><span class="sgr1">julia&gt;</span></span> using JuliaFormatter

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> JuliaFormatter.format(MyAwesomePackage)
true
</code></pre>
<div class="vscode"><p><strong>VSCode</strong>: The <a href="https://www.julia-vscode.org/docs/stable/userguide/formatter/">default formatter</a> falls back on JuliaFormatter.jl.</p>
</div><div class="advanced"><p><strong>Advanced</strong>: You can format code automatically in GitHub pull requests with the <a href="https://github.com/julia-actions/julia-format"><code>julia-format</code> action</a>, or add the formatting check directly to your test suite.</p>
</div><h2 id="code_quality" ><a href="#code_quality"> Code quality</a></h2><p>Of course, there is more to code quality than just formatting.
<a href="https://github.com/JuliaTesting/Aqua.jl">Aqua.jl</a> provides a set of routines that examine other aspects of your package, from unused dependencies to ambiguous methods.
It is usually a good idea to include the following in your tests:</p>
<pre><code class="julia-repl"><span class="sgr32"><span class="sgr1">julia&gt;</span></span> using Aqua, MyAwesomePackage

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> Aqua.test_all(MyAwesomePackage)
LoadError: Some tests did not pass: 3 passed, 1 failed, 0 errored, 0 broken.
in expression starting at string:1
</code></pre>
<p>Meanwhile, <a href="https://github.com/aviatesk/JET.jl">JET.jl</a> is a complementary tool, similar to a static linter.
Here we focus on its <a href="https://aviatesk.github.io/JET.jl/stable/jetanalysis/">error analysis</a>, which can detect errors or typos without even running the code by leveraging type inference.
You can either use it in report mode (with a nice <a href="https://www.julia-vscode.org/docs/stable/userguide/linter/#Runtime-diagnostics">VSCode display</a>) or in test mode as follows:</p>
<pre><code class="julia-repl"><span class="sgr32"><span class="sgr1">julia&gt;</span></span> using JET, MyAwesomePackage

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> JET.report_package(MyAwesomePackage)
[toplevel-info] virtualized the context of Main (took 0.012 sec)
[toplevel-info] entered into /home/runner/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage/src/MyAwesomePackage.jl
[toplevel-info]  exited from /home/runner/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage/src/MyAwesomePackage.jl (took 0.009 sec)
[toplevel-info] analyzed 0 top-level definitions (took 0.005 sec)
JET.JETToplevelResult{JET.JETAnalyzer{JET.BasicPass}, Base.Pairs{Symbol, Any, NTuple{4, Symbol}, @NamedTuple{concretization_patterns::Vector{Symbol}, analyze_from_definitions::Bool, toplevel_logger::IOContext{Base.PipeEndpoint}, ignore_missing_comparison::Bool}}}(JET.JETAnalyzer{JET.BasicPass}(JET.AnalyzerState(0x0000000000007b7f, Core.Compiler.InferenceResult[], Core.Compiler.InferenceParams(3, 4, 8, 32, 3, true, true, false, true, false), Core.Compiler.OptimizationParams(true, 100, 1000, 250, 20, 32, true, false, false), IdDict{Core.Compiler.InferenceResult, Union{JET.AnalysisResult, JET.CachedAnalysisResult}}(), JET.InferenceErrorReport[], nothing, Bool[], JET.__toplevelmod__, Dict{Int64, Symbol}(), nothing, 0), JET.AnalysisCache(IdDict{Core.MethodInstance, Core.CodeInstance}()), JET.BasicPass(), Core.Compiler.CachedMethodTable{Core.Compiler.OverlayMethodTable}(Core.Compiler.IdDict{Core.Compiler.MethodMatchKey, Union{Nothing, Core.Compiler.MethodMatchResult}}(Any[#undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef, #undef], 0, 0), Core.Compiler.OverlayMethodTable(0x0000000000007b7f, # 1 method for callable object:
 [1] iterate(::Tuple{}, ::Int64)
     @ ~/.julia/packages/JET/Vkj89/src/analyzers/jetanalyzer.jl:177)), JET.JETAnalyzerConfig(true)), JET.VirtualProcessResult(Set([&quot;/home/runner/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage/src/MyAwesomePackage.jl&quot;]), String[], Set(Module[Main.var&quot;##JETVirtualModule#225&quot;, Main.var&quot;##JETVirtualModule#225&quot;.MyAwesomePackage]), JET.ToplevelErrorReport[], JET.InferenceErrorReport[], Type[], Main =&gt; Main.var&quot;##JETVirtualModule#225&quot;), &quot;JETAnalyzer: \&quot;/home/runner/work/modernjuliaworkflows.github.io/modernjuliaworkflows.github.io/__site/MyAwesomePackage/src/MyAwesomePackage.jl\&quot;&quot;, Base.Pairs{Symbol, Any, NTuple{4, Symbol}, @NamedTuple{concretization_patterns::Vector{Symbol}, analyze_from_definitions::Bool, toplevel_logger::IOContext{Base.PipeEndpoint}, ignore_missing_comparison::Bool}}(:concretization_patterns =&gt; [:x_], :analyze_from_definitions =&gt; true, :toplevel_logger =&gt; IOContext(Base.PipeEndpoint(RawFD(4294967295) closed, 0 bytes waiting)), :ignore_missing_comparison =&gt; true))

<span class="sgr32"><span class="sgr1">julia&gt;</span></span> JET.test_package(MyAwesomePackage)
Test Passed
</code></pre>
<p>Note that both Aqua.jl and JET.jl might pick up false positives: refer to their respective documentations for ways to make them less sensitive.</p>
<p>Finally, <a href="https://github.com/ericphanson/ExplicitImports.jl">ExplicitImports.jl</a> can help you get rid of generic imports to specify where each of the names in your package comes from.
This is a good practice and makes your code more robust to name conflicts between dependencies.</p>
<h2 id="documentation" ><a href="#documentation"> Documentation</a></h2><p>Even if your code does everything it is supposed to, it will be useless to others (and pretty soon to yourself) without proper documentation.
Adding <a href="https://docs.julialang.org/en/v1/manual/documentation/">docstrings</a> everywhere needs to become a second nature.
This way, readers and users of your code can query them through the REPL help mode.
<a href="https://github.com/JuliaDocs/DocStringExtensions.jl">DocStringExtensions.jl</a> provides a few shortcuts that can speed up docstring creation by taking care of the obvious parts.</p>
<pre><code class="julia">&quot;&quot;&quot;
    myfunc(a, b; kwargs...)

One-line sentence describing the purpose of the function,
just below the (indented) signature.

More details if needed.
&quot;&quot;&quot;
function myfunc end;</code></pre>
<p>However, package documentation is not limited to docstrings.
It can also contain high-level overviews, technical explanations, examples, tutorials, etc.
<a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> allows you to design a website for all of this, based on Markdown files contained in the <code>docs</code> subfolder of your package.
Unsurprisingly, its own <a href="https://documenter.juliadocs.org/stable/">documentation</a> is excellent and will teach you a lot.
To build the documentation locally, just run</p>
<pre><code class="julia-repl">julia&gt; using Pkg

julia&gt; Pkg.activate(&quot;docs&quot;)

julia&gt; include(&quot;docs/make.jl&quot;)</code></pre>
<p>Then, use <a href="https://github.com/tlienart/LiveServer.jl">LiveServer.jl</a> from your package folder to visualize and automatically update the website as the code changes (similar to Revise.jl):</p>
<pre><code class="julia-repl">julia&gt; using LiveServer

julia&gt; servedocs()</code></pre>
<p>To host the documentation online easily, just select the <a href="https://juliaci.github.io/PkgTemplates.jl/stable/user/#PkgTemplates.Documenter"><code>Documenter</code> plugin</a> from PkgTemplates.jl before creation.
Not only will this fill the <code>docs</code> subfolder with the right contents: it will also initialize a <a href="https://documenter.juliadocs.org/stable/man/hosting/#gh-pages-Branch">GitHub Actions workflow</a> to build and deploy your website on <a href="https://pages.github.com/">GitHub pages</a>.
The only thing left to do is to <a href="https://documenter.juliadocs.org/stable/man/hosting/#gh-pages-Branch">select the <code>gh-pages</code> branch as source</a>.</p>
<div class="advanced"><p><strong>Advanced</strong>: You may find the following Documenter plugins useful:</p>
<ol>
<li><a href="https://github.com/JuliaDocs/DocumenterCitations.jl">DocumenterCitations.jl</a> allows you to insert citations inside the documentation website from a BibTex file.</li>
<li><a href="https://github.com/JuliaDocs/DocumenterInterLinks.jl">DocumenterInterLinks.jl</a> allow you to cross-reference external documentations (Documenter and Sphinx).</li>
</ol>
<p> Assuming you are looking for an alternative to Documenter.jl, you can try out <a href="https://github.com/lorenzoh/Pollen.jl">Pollen.jl</a>.
 In another category, <a href="https://github.com/AtelierArith/Replay.jl">Replay.jl</a> allows you to replay instructions entered into your terminal as an ASCII video, which is nice for tutorials.</p>
</div><h2 id="literate_programming" ><a href="#literate_programming"> Literate programming</a></h2><p>Scientific software is often hard to grasp, and the code alone may not be very enlightening.
Whether it is for package documentation or to write papers and books, you might want to interleave code with texts, formulas, images and so on.
In addition to the <a href="https://github.com/fonsp/Pluto.jl">Pluto.jl</a> and <a href="https://jupyter.org/">Jupyter</a> notebooks, take a look at <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a> to enrich your code with comments and translate it to various formats.
<a href="https://quarto.org/">Quarto</a> is another cross-language notebook system that supports Python, R and Julia, while <a href="https://github.com/JuliaBooks/Books.jl">Books.jl</a> is more relevant to draft long documents.</p>
<h2 id="versions_and_registration" ><a href="#versions_and_registration"> Versions and registration</a></h2><p>The Julia community has adopted <a href="https://semver.org/">semantic versioning</a>, which means every package must have a version, and the version numbering follows strict rules.
The main consequence is that you need to specify <a href="https://pkgdocs.julialang.org/v1/compatibility/">compatibility bounds</a> for your dependencies: this happens in the <code>[compat]</code> section of your <code>Project.toml</code>.
To initialize these bounds, use the <code>]compat</code> command in the Pkg mode of the REPL, or the package <a href="https://github.com/GunnarFarneback/PackageCompatUI.jl">PackageCompatUI.jl</a>.</p>
<p>As your package lives on, new versions of your dependencies will be released.
The <a href="https://github.com/JuliaRegistries/CompatHelper.jl">CompatHelper.jl</a>  GitHub Action will help you monitor Julia dependencies and update your <code>Project.toml</code> accordingly.
In addition, <a href="https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuring-dependabot-version-updates#enabling-dependabot-version-updates">Dependabot</a> can monitor the dependencies... of your GitHub actions themselves.
But don't worry: both are default plugins in the PkgTemplates.jl setup.</p>
<div class="advanced"><p><strong>Advanced</strong>: It may also happen that you incorrectly promise compatibility with an old version of a package.
 To prevent that, the <a href="https://github.com/julia-actions/julia-downgrade-compat">julia-downgrade-compat</a> GitHub action tests your package with the oldest possible version of every dependency, and verifies that everything still works.</p>
</div><p>If your package is useful to others in the community, it may be a good idea to register it, that is, make it part of the pool of packages that can be installed with</p>
<pre><code class="julia-repl">pkg&gt; add MyAwesomePackage  # made possible by registration</code></pre>
<p>Note that unregistered packages can also be installed by anyone from the GitHub URL, but this a less reproducible solution:</p>
<pre><code class="julia-repl">pkg&gt; add https://github.com/myuser/MyAwesomePackage  # not ideal</code></pre>
<p>To register your package, check out the <a href="https://github.com/JuliaRegistries/General">general registry</a> guidelines.
The <a href="https://github.com/JuliaRegistries/Registrator.jl">Registrator.jl</a> bot can help you automate the process.
Another handy bot, provided by default with PkgTemplates.jl, is <a href="https://github.com/JuliaRegistries/TagBot">TagBot</a>: it automatically tags new versions of your package following each registry release.
If you have performed the <a href="https://documenter.juliadocs.org/stable/man/hosting/#travis-ssh">necessary SSH configuration</a>, TagBot will also trigger documentation website builds following each release.</p>
<div class="advanced"><p><strong>Advanced</strong>: If your package is only interesting to you and a small group of collaborators, or if you don't want to make it public, you can still register it by setting up a local registry: see <a href="https://github.com/GunnarFarneback/LocalRegistry.jl">LocalRegistry.jl</a>.</p>
</div><h2 id="reproducibility" ><a href="#reproducibility"> Reproducibility</a></h2><p>Obtaining consistent and reproducible results is an essential part of experimental science.
<a href="https://github.com/JuliaDynamics/DrWatson.jl">DrWatson.jl</a> is a general toolbox for running and re-running experiments in an orderly fashion.
We now explore a few specific issues that often arise.</p>
<p>A first hurdle is <a href="https://docs.julialang.org/en/v1/stdlib/Random/">random number generation</a>, which is not guaranteed to remain stable across Julia versions.
To ensure that the random streams remain exactly the same, you need to use <a href="https://github.com/JuliaRandom/StableRNGs.jl">StableRNGs.jl</a>.
Another aspect is dataset download and management.
The packages <a href="https://github.com/oxinabox/DataDeps.jl">DataDeps.jl</a>, <a href="https://github.com/tecosaur/DataToolkit.jl">DataToolkit.jl</a> and <a href="https://github.com/JuliaPackaging/ArtifactUtils.jl">ArtifactUtils.jl</a> can help you bundle non-code elements with your package.
A third thing to consider is proper citation and versioning.
Giving your package a DOI with <a href="https://zenodo.org/">Zenodo</a> ensures that everyone can properly cite it in scientific publications.
Similarly, your papers should cite the packages you use as dependencies: <a href="https://github.com/SebastianM-C/PkgCite.jl">PkgCite.jl</a> will help with that.</p>
<h2 id="interoperability" ><a href="#interoperability"> Interoperability</a></h2><p>To ensure compatibility with earlier Julia versions, <a href="https://github.com/JuliaLang/Compat.jl">Compat.jl</a> is your best ally.</p>
<p>Making packages play nice with one another is a key goal of the Julia ecosystem.
Since Julia 1.9, this can be done with <a href="https://pkgdocs.julialang.org/v1/creating-packages/#Conditional-loading-of-code-in-packages-(Extensions)">package extensions</a>, which override specific behaviors based on the presence of a given package in the environment.
<a href="https://github.com/cjdoris/PackageExtensionTools.jl">PackageExtensionTools.jl</a> eases the pain of setting up extensions.</p>
<p>Furthermore, the Julia ecosystem as a whole plays nice with other programming languages too.
<a href="https://docs.julialang.org/en/v1/manual/calling-c-and-fortran-code/">C and Fortran</a> are natively supported.
Python can be easily interfaced with the combination of <a href="https://github.com/cjdoris/CondaPkg.jl">CondaPkg.jl</a> and <a href="https://github.com/cjdoris/PythonCall.jl">PythonCall.jl</a>.
Other language compatibility packages can be found in the <a href="https://github.com/JuliaInterop">JuliaInterop</a> organization, like <a href="https://github.com/JuliaInterop/RCall.jl">RCall.jl</a>.</p>
<p>Part of interoperability is also flexibility and customization: the <a href="https://github.com/JuliaPackaging/Preferences.jl">Preferences.jl</a> package gives a nice way to specify various options in TOML files.</p>
<div class="advanced"><p><strong>Advanced</strong>: Some package developers may need to define what kind of behavior they expect from a certain type, or what a certain method should do.
 When writing it in the documentation is not enough, a formal testable specification becomes necessary.
 This problem of "interfaces" does not yet have a definitive solution in Julia, but several options have been proposed: <a href="https://github.com/rafaqz/Interfaces.jl">Interfaces.jl</a>, <a href="https://github.com/Seelengrab/RequiredInterfaces.jl">RequiredInterfaces.jl</a> and <a href="https://github.com/Seelengrab/PropCheck.jl">PropCheck.jl</a> are all worth checking out.</p>
</div><h2 id="collaboration" ><a href="#collaboration"> Collaboration</a></h2><p>Once your package grows big enough, you might need to bring in some help.
Working together on a software project has its own set of challenges, which are partially addressed by a good set of ground rules liks <a href="https://github.com/SciML/ColPrac">SciML ColPrac</a>.
Of course, collaboration goes both ways: if you find a Julia package you really like, you are more than welcome to <a href="https://julialang.org/contribute/">contribute</a> as well, for example by opening issues or submitting pull requests.</p>

  <div class="page-foot">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> G. Dalle, J. Smit, A. Hill. Last modified: August 26, 2024. </br>
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>

</div>

    </div>  
    
    
        <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>

    
  </body>
</html>
